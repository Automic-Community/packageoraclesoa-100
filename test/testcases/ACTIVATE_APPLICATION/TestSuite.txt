*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Setup_suite
Suite Teardown    Teardown_suite
Force Tags        ACTIVATE_APPLICATION    BASIC
Default Tags      win    unix    ALL
Test Template     Activate Application Template
Resource          ../../resources/keywords.txt
Resource          prt_keywords.txt

*** Test Cases ***    OK_NOK    Application Name          Revision       Label                      Partition                      Oracle Home              Online Mode    RETURN CODE    RETURN STATUS
1. Success activate application default value
                      OK        ${_APP_NAME}              ${_APP_REV}    ${_APP_LABEL}              ${_APP_PARTITION}              ${_WL_HOME}              NO             0              ${ENDED_OK}

2. Fail activate application wrong name
                      NOK       ${_APP_NAME}_NOT_EXIST    ${_APP_REV}    ${_APP_LABEL}              ${_APP_PARTITION}              ${_WL_HOME}              NO             1              ${ENDED_NOK}

3. Fail activate application wrong revision
                      NOK       ${_APP_NAME}              9.9            ${_APP_LABEL}              ${_APP_PARTITION}              ${_WL_HOME}              NO             1              ${ENDED_NOK}

4. Fail activate application wrong label
                      NOK       ${_APP_NAME}              ${_APP_REV}    ${_APP_LABEL}_NOT_EXIST    ${_APP_PARTITION}              ${_WL_HOME}              NO             1              ${ENDED_NOK}

5. Fail activate application wrong partition
                      NOK       ${_APP_NAME}              ${_APP_REV}    ${_APP_LABEL}              ${_APP_PARTITION}_NOT_EXIST    ${_WL_HOME}              NO             1              ${ENDED_NOK}

6. Fail activate application wrong oracle home
                      NOK       ${_APP_NAME}              ${_APP_REV}    ${_APP_LABEL}              ${_APP_PARTITION}              ${_WL_HOME}_NOT_EXIST    NO             2              ${ENDED_NOK}

7. Success activate application Online mode
                      OK        ${_APP_NAME}              ${_APP_REV}    ${_APP_LABEL}              ${_APP_PARTITION}              ${_WL_HOME}              YES            0              ${ENDED_OK}

8. Fail activate application wrong name Online mode
                      NOK       ${_APP_NAME}_NOT_EXIST    ${_APP_REV}    ${_APP_LABEL}              ${_APP_PARTITION}              ${_WL_HOME}              YES            1              ${ENDED_NOK}

9. Fail activate application wrong revision Online mode
                      NOK       ${_APP_NAME}              9.9            ${_APP_LABEL}              ${_APP_PARTITION}              ${_WL_HOME}              YES            1              ${ENDED_NOK}

10. Fail activate application wrong label Online mode
                      NOK       ${_APP_NAME}              ${_APP_REV}    ${_APP_LABEL}_NOT_EXIST    ${_APP_PARTITION}              ${_WL_HOME}              YES            1              ${ENDED_NOK}

11. Fail activate application wrong partition Online mode
                      NOK       ${_APP_NAME}              ${_APP_REV}    ${_APP_LABEL}              ${_APP_PARTITION}_NOT_EXIST    ${_WL_HOME}              YES            1              ${ENDED_NOK}

12. Fail activate application wrong oracle home Online mode
                      NOK       ${_APP_NAME}              ${_APP_REV}    ${_APP_LABEL}              ${_APP_PARTITION}              ${_WL_HOME}_NOT_EXIST    YES            2              ${ENDED_NOK}

*** Keywords ***
Activate Application Template
    [Arguments]    ${OK_NOK}    ${WEBLOGIC_APP_NAME}    ${WEBLOGIC_APP_REVISION}    ${WEBLOGIC_APP_LABEL}    ${WEBLOGIC_APP_PARTITION}    ${WEBLOGIC_HOME}
    ...    ${ONLINE_MODE}    ${returnCode}    ${returnStatus}
    [Documentation]    This template is used for test UNDEPLOY_APPLICATION with needed arguments
    ...    - ${OK_NOK}: boolean value indicate if the runbook(action) should be ENDED_OK or ENDED_NOT_OK. value of this variable should be OK or NOK.
    ...    - ${appName}: string value indicate the application to be activated
    ...    - ${revision}: string value indicate revision which application will be activated
    ...    - ${label}: string value indicate label which application will be activated to
    ...    - ${partition}: string value indicate partition of activated application
    ...    - ${oracle_home}: string value indicate Oracle Home in target machine
    ...    - ${retcode}: expected return code after execute action(runbook)
    ...    - ${status}: expected return status after execute action(runbook)
    Init Action    ${ACTION_ACTIVATE_APPLICATION}
    Action Set    ${PRT_ACTIVATE_APPLICATION_NAME}    ${WEBLOGIC_APP_NAME}
    Action Set    ${PRT_ACTIVATE_APPLICATION_REVISION}    ${WEBLOGIC_APP_REVISION}
    Action Set    ${PRT_ACTIVATE_APPLICATION_LABEL}    ${WEBLOGIC_APP_LABEL}
    Action Set    ${PRT_ACTIVATE_APPLICATION_PARTITION}    ${WEBLOGIC_APP_PARTITION}
    Action Set    ${PRT_ACTIVATE_APPLICATION_ORACLE_HOME}    ${WEBLOGIC_HOME}
    Action Set    ${PRT_ACTIVATE_APPLICATION_ONLINE_MODE}    ${ONLINE_MODE}
    Set Default Weblogic Server Connection
    Action Set Timeout    300
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    ${returnCode}
    Action Return Status Should Be    ${returnStatus}
    Action Report Should Contain    ${header_logging}
    Action Report Should Contain    ${param_logging}
    Run Keyword If    '${OK_NOK}'=='OK'    Action Report Should Contain    ${execution_logging}
    Run Keyword If    '${OK_NOK}'=='OK'    Action Report Should Contain    ${footer_logging_OK}

Setup_suite
    [Documentation]    TODO: Write all steps need prepare before testing here
    Log    Start testing for Activate Application Template
    Deploy a Composite Application

Teardown_suite
    [Documentation]    TODO: Write all steps for cleanup after testing here
    Log    Testing for Activate Application Template end
    Undeploy a Composite Application
